{"uid":"9420b1a3e211dfab","name":"Validate Council Output [MiltonKeynesCityCouncil-None-None]","fullName":"features/validate_council_outputs.feature:Validate Council Output","historyId":"f5a674d20e7cc3f6d8fa292afb723809","time":{"start":1706836117536,"stop":1706836117538,"duration":2},"status":"failed","statusMessage":"AttributeError: 'str' object has no attribute 'text'","statusTrace":"fixturefunc = <function scrape_step at 0x7f575a2cc720>\nrequest = <FixtureRequest for <Function test_scenario_outline[MiltonKeynesCityCouncil-None-None]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7f575975be50>, 'council': 'MiltonKeynesCityCouncil', 'selenium_mode': 'None', 'selenium_url': 'None'}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:92: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:96: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:115: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:78: in template_method\n    bin_data_dict = self.parse_data(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <MiltonKeynesCityCouncil.CouncilClass object at 0x7f575977c3d0>\npage = ''\nkwargs = {'headless': True, 'paon': None, 'postcode': None, 'uprn': 'Fullers Slade', ...}\ndata = {'bins': []}\n\n    def parse_data(self, page: str, **kwargs) -> dict:\n        data = {\"bins\": []}\n    \n        # Get the estate from the UPRN field\n        estate = kwargs.get(\"uprn\")\n    \n        # Parse the council's website\n>       soup = BeautifulSoup(page.text, features=\"html.parser\")\nE       AttributeError: 'str' object has no attribute 'text'\n\nuk_bin_collection/uk_bin_collection/councils/MiltonKeynesCityCouncil.py:21: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AttributeError: 'str' object has no attribute 'text'","statusTrace":"fixturefunc = <function scrape_step at 0x7f575a2cc720>\nrequest = <FixtureRequest for <Function test_scenario_outline[MiltonKeynesCityCouncil-None-None]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7f575975be50>, 'council': 'MiltonKeynesCityCouncil', 'selenium_mode': 'None', 'selenium_url': 'None'}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:92: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:96: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:115: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:78: in template_method\n    bin_data_dict = self.parse_data(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <MiltonKeynesCityCouncil.CouncilClass object at 0x7f575977c3d0>\npage = ''\nkwargs = {'headless': True, 'paon': None, 'postcode': None, 'uprn': 'Fullers Slade', ...}\ndata = {'bins': []}\n\n    def parse_data(self, page: str, **kwargs) -> dict:\n        data = {\"bins\": []}\n    \n        # Get the estate from the UPRN field\n        estate = kwargs.get(\"uprn\")\n    \n        # Parse the council's website\n>       soup = BeautifulSoup(page.text, features=\"html.parser\")\nE       AttributeError: 'str' object has no attribute 'text'\n\nuk_bin_collection/uk_bin_collection/councils/MiltonKeynesCityCouncil.py:21: AttributeError","steps":[{"name":"Given the council: MiltonKeynesCityCouncil","time":{"start":1706836117536,"stop":1706836117536,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"When we scrape the data from MiltonKeynesCityCouncil using None and the None is set","time":{"start":1706836117536,"stop":1706836117538,"duration":2},"status":"failed","statusMessage":"'str' object has no attribute 'text'","statusTrace":"AttributeError: 'str' object has no attribute 'text'\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"host","value":"fv-az1393-672"},{"name":"thread","value":"2751-MainThread"},{"name":"framework","value":"pytest-bdd"},{"name":"language","value":"cpython3"},{"name":"feature","value":"Test each council output matches expected results"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"MiltonKeynesCityCouncil"},{"name":"selenium_mode","value":"None"},{"name":"selenium_url","value":"None"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":22,"broken":0,"skipped":0,"passed":0,"unknown":0,"total":22},"items":[{"uid":"8f17a33930aca33b","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/22//#testresult/8f17a33930aca33b","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1706749947971,"stop":1706749947973,"duration":2}},{"uid":"dac718c0c363a13","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/21//#testresult/dac718c0c363a13","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1706663336263,"stop":1706663336265,"duration":2}},{"uid":"cf016dcaeb3122d","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/20//#testresult/cf016dcaeb3122d","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1706576927798,"stop":1706576927800,"duration":2}},{"uid":"df39991cbeca18ba","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/19//#testresult/df39991cbeca18ba","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1706490546716,"stop":1706490546718,"duration":2}},{"uid":"9e0f680f9ff5ff65","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/18//#testresult/9e0f680f9ff5ff65","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1706404419235,"stop":1706404419237,"duration":2}},{"uid":"5e3d997053d9b023","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/17//#testresult/5e3d997053d9b023","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1706317668409,"stop":1706317668411,"duration":2}},{"uid":"b63d5d3ff5f8b77d","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/16//#testresult/b63d5d3ff5f8b77d","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1706231406429,"stop":1706231406432,"duration":3}},{"uid":"b7f673a6e90cf687","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/15//#testresult/b7f673a6e90cf687","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1706145349998,"stop":1706145350000,"duration":2}},{"uid":"c8830d6dc9112d2f","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/14//#testresult/c8830d6dc9112d2f","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1706058928559,"stop":1706058928561,"duration":2}},{"uid":"ab94e81ffe0c4a64","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/13//#testresult/ab94e81ffe0c4a64","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1705972574548,"stop":1705972574550,"duration":2}},{"uid":"54bd4ad9f9830f39","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/12//#testresult/54bd4ad9f9830f39","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1705886240870,"stop":1705886240873,"duration":3}},{"uid":"3358c04989dc6470","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/11//#testresult/3358c04989dc6470","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1705799980120,"stop":1705799980123,"duration":3}},{"uid":"fc00208698695594","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/10//#testresult/fc00208698695594","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1705713203349,"stop":1705713203351,"duration":2}},{"uid":"1d688afd6d91d2c7","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/9//#testresult/1d688afd6d91d2c7","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1705626895937,"stop":1705626895938,"duration":1}},{"uid":"42e9fe8160ba4b7c","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/8//#testresult/42e9fe8160ba4b7c","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1705540432304,"stop":1705540432306,"duration":2}},{"uid":"277597149dac37ce","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/7//#testresult/277597149dac37ce","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1705454082891,"stop":1705454082893,"duration":2}},{"uid":"96e29ba51a914880","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/6//#testresult/96e29ba51a914880","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1705367656129,"stop":1705367656131,"duration":2}},{"uid":"b33a94a819025cbe","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/5//#testresult/b33a94a819025cbe","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1705281384020,"stop":1705281384022,"duration":2}},{"uid":"6e546635e04f6537","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/4//#testresult/6e546635e04f6537","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1705195160439,"stop":1705195160441,"duration":2}},{"uid":"705c0b11d391a205","reportUrl":"https://sammort.github.io/UKBinCollectionData/3.11/3//#testresult/705c0b11d391a205","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1705108406023,"stop":1705108406025,"duration":2}}]},"tags":[]},"source":"9420b1a3e211dfab.json","parameterValues":["MiltonKeynesCityCouncil","None","None"]}